# This is an example .goreleaser.yml file with some sensible defaults.
# Make sure to check the documentation at https://goreleaser.com
before:
  hooks:
    # You may remove this if you don't use go modules.
    - go mod tidy
builds:
  - env:
      - CGO_ENABLED=0
    goos:
      - linux
      - windows
      - darwin

release:
  draft: false
  replace_existing_draft: true
  name_template: '{{.Version}}'
  # target_commitish: 'master'
  # github:
  #   owner: caarlos0-graveyard
  #   name: test2

nightly:
  publish_release: true
  keep_single_release: true

monorepo:
  tag_prefix: v

dockers:
- image_templates:
  - caarlos0/goreleasertest:v{{.Version}}-arm64
  goarch: arm64
  dockerfile: true.Dockerfile
- image_templates:
  - caarlos0/goreleasertest:v{{.Version}}-amd64
  goarch: amd64
  dockerfile: true.Dockerfile

docker_manifests:
- name_template: 'caarlos0/goreleasertest:v{{.Version}}'
  image_templates:
  - caarlos0/goreleasertest:v{{.Version}}-amd64
  - caarlos0/goreleasertest:v{{.Version}}-arm64

split:
  by: goos
